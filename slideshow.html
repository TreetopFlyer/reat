<!DOCTYPE html>
<html>
    <head>
        <script src="https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js"></script>
        <!-- custom event polyfill -->
        <script>
            (function () {
              if ( typeof window.CustomEvent === "function" ) return false;
              function CustomEvent ( event, params ) {
                params = params || { bubbles: false, cancelable: false, detail: undefined };
                var evt = document.createEvent( 'CustomEvent' );
                evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );
                return evt;
               }
              CustomEvent.prototype = window.Event.prototype;
              window.CustomEvent = CustomEvent;
            })();
        </script>
        <link rel="stylesheet" type="text/css" href="styles.css">
    </head>
    <body>
        <div id="App">
            <button v-on:click="SlidesChange(0, false)">1 forward</button>
            <button v-on:click="SlidesChange(1, false)">2 forward</button>
            <button v-on:click="SlidesChange(2, false)">3 forward</button>
            <button v-on:click="SlidesChange(0, true)">1 backward</button>
            <button v-on:click="SlidesChange(1, true)">2 backward</button>
            <button v-on:click="SlidesChange(2, true)">3 backward</button>
            <div class="Slideshow">
                <Slide v-bind:active="SlidesState[0]" v-bind:backward="SlidesBackward">
                    <h2>Part One</h2>
                    <p>Please remove ear protection and make sure headphones fit correctly</p>
                </Slide> 
                <Slide v-bind:active="SlidesState[1]" v-bind:backward="SlidesBackward">
                    <h2>Part Two</h2>
                    <p>Please insert ear protection and make sure headphones fit correctly</p>
                </Slide> 
                <Slide v-bind:active="SlidesState[2]" v-bind:backward="SlidesBackward">
                    <h2>Part Three</h2>
                    <p>Please insert ear protection and make sure headphones fit correctly</p>
                </Slide> 
            </div>

        </div>

        <!-- slide component -->
        <script>
            Vue.component("Slide", {
                props:["active", "backward"],
                data:function()
                {
                    return {
                        CSS:""
                   };
                },
                watch:{
                   active:function(inNew, inOld)
                   {
                       var prefix, suffix;
                       
                       if(inNew){prefix = "Active";}
                       else{prefix = "Inactive";}
                       
                       if(this.backward){suffix = "Backward";}
                       else{suffix = "Forward";}
                       
                       this.CSS = prefix+" "+suffix;
                   }
                },
                mounted:function()
                {
                },
               template:"#TemplateSlide"
            });
        </script>
        <script type="x-template" id="TemplateSlide">
            <div class="Band Slide" v-bind:class="CSS">
                <div class="Center">
                    <div class="Pad">
                        <slot></slot>
                    </div>
                </div>
            </div>
        </script>

        <!-- vue app -->
        <script>
            var App = new Vue({
                el:"#App",
                data:{
                    SlidesState:[],
                    SlidesBackward:true,
                    SlidesActive:0,
                },
                methods:{
                    SlidesChange:function(inIndex, inBackward)
                    {
                        if(inIndex == this.SlidesActive){return;}
                        
                        this.SlidesBackward = inBackward;
                        
                        Vue.set(this.SlidesState, this.SlidesActive, false);
                        this.SlidesActive = inIndex;
                        Vue.set(this.SlidesState, this.SlidesActive, true);
                    }
                },
                mounted: function()
                {
                    var i;
                    for(i=0; i<this.$children.length; i++)
                    {
                        var child = this.$children[i];
                        if(child.$options._componentTag == "slide")
                        {
                            this.SlidesState.push(false);
                        }
                    }
                    Vue.set(this.SlidesState, this.SlidesActive, true);
                }
            });
        </script>
    </body>
</html>